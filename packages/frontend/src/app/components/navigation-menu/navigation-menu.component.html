<mat-drawer-container>
  <mat-drawer
    style="position: fixed"
    class="side-menu"
    [mode]="mobile() ? 'over' : 'side'"
    [opened]="menuVisible() || !mobile()"
    (closed)="hideMenu()"
  >
    <a [href]="'/'" class="block" (click)="hideMenu()">
      <img
        [src]="logo"
        class="instance-logo block mx-auto mt-3"
        alt="instance logo"
        width="200"
        style="aspect-ratio: 3 / 1; object-fit: contain"
      />
    </a>
    <hr />
    <nav aria-label="Navigation menu">
      <mat-nav-list>
        @for (link of menuItems(); track $index) {
          @if (link.divider) {
            <hr />
          } @else {
            <app-menu-item [item]="link"></app-menu-item>
          }
        }
      </mat-nav-list>
    </nav>
    <div class="drawer-footer">
      <app-color-scheme-switcher></app-color-scheme-switcher>
    </div>
  </mat-drawer>
  <mat-drawer-content>
    @let notificationCount = notifications() + adminNotifications() + usersAwaitingApproval() + followsAwaitingApproval() + awaitingAsks();
    <button
      style="position: fixed; z-index: 500; top: 1em; left: 1em"
      mat-mini-fab
      color="primary"
      [hidden]="!mobile()"
      type="button"
      class="show-sidebar-menu-button"
      (click)="showMenu()"
      [matBadge]="notificationCount"
      [matBadgeHidden]="
        notificationCount === 0
      "
      matBadgePosition="below"
    >
      <fa-icon [icon]="hamburguerIcon"></fa-icon>
    </button>
    <button
      style="position: fixed; z-index: 500; bottom: 1em; right: 1em"
      mat-fab
      color="primary"
      [hidden]="!mobile() || !jwtService.tokenValid() || currentRoute === '/editor'"
      type="button"
      class="show-sidebar-menu-button create-post-button"
      (click)="this.hideMenu(); this.openEditor()"
    >
      <fa-icon [icon]="pencilIcon"></fa-icon>
    </button>
    <div class="wafrn-content">
      <div *ngIf="maintenanceMode" [innerHtml]="maintenanceMessage"></div>
      <router-outlet></router-outlet>
    </div>
  </mat-drawer-content>
</mat-drawer-container>
